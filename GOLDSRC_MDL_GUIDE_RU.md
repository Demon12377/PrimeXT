# Мастер-справочник по лимитам и созданию моделей .mdl для GoldSrc (CS 1.6) и PrimeXT

## 1. Введение
Этот документ содержит «скрытые» методы и революционные подходы к созданию моделей для CS 1.6, обнаруженные в ходе анализа исходного кода PrimeXT.

---

## 2. Революционный метод: Vertex-Baked Normal Specular (VBNS)
Этот метод позволяет получить честный Normal Mapping (рельефные блики) в CS 1.6 без изменения кода игры.

### Суть открытия:
Движок GoldSrc при расчете эффекта `Chrome` использует **нормали вершин**. Если мы заменим стандартные сглаженные нормали на нормали, взятые с высокополигональной (High-Poly) модели, блики будут изгибаться по форме 4K-оригинала.

### Алгоритм для FAMAS (Уровень "Первооткрыватель"):
1.  **Создание Specular-меша:** Сделайте полную копию меша FAMAS. Увеличьте его на `0.005` юнита (Offset), чтобы он был "оболочкой".
2.  **Инъекция нормалей:** В Blender используйте модификатор **Data Transfer**. Перенесите нормали (Face Corner Data -> Custom Normals) с вашей High-Poly 4096px модели FAMAS на Low-Poly меш оболочки.
3.  **Текстура-маска:** Создайте текстуру для этой оболочки. Она должна быть черной в местах, где нет металла, и иметь яркий сферический градиент (блик) в местах металла.
4.  **QC Настройка (Комбинирование режимов):**
    Для того чтобы блик был живым и прозрачным, нужно совместить `chrome` и `additive`. В моем обновленном компиляторе это делается так:
    ```qc
    $texrendermode "famas_spec" chrome
    $texrendermode "famas_spec" additive
    ```
    *Теперь не обязательно иметь слово "chrome" в названии файла, можно задать это командой.*

---

## 3. Имитация бесконечного разрешения (Detail Shells)
Создайте третью оболочку меша с микроскопическим смещением. Назначьте ей текстуру размером 512x512, которая представляет собой повторяющийся шум металла или полимера (тайлинг). Установите её в режим `additive`.

---

## 4. Скрытые возможности и лимиты

*   **`$noclampsize`**: Позволяет вшивать текстуры до **1024x1024** без искажения UV.
*   **Лимит 1Мб**: Если текстура (например, 1024x1024) после обработки весит больше 1 мегабайта, компилятор выдаст ошибку. В этом случае используйте нарезку меша.
*   **`$staticprop`**: Схлопывает скелет для статичных объектов.

---

## 5. Master-Prompt для Nana Banano 2 Pro

> **Prompt:** *Military-grade technical texture sheet for FAMAS F1, orthogonal view. Grid layout: [A] Albedo: matte black carbon fiber and parkerized steel. [B] High-contrast Cavity Map: pure white edges, deep black crevices. [C] Specular/Flow Map: anisotropic brushed metal patterns. [D] Ambient Occlusion. 8k resolution, ray-traced details, cinematic lighting, industrial wear and tear, hyper-realistic, scientific visualization style.*

---

## 6. Таблица совместимости флагов (CS 1.6)

| Опция | CS 1.6 | Команда `$texrendermode` | Описание |
| :--- | :---: | :--- | :--- |
| **Chrome** | ✅ | `chrome` | Динамические блики (теперь работает через QC). |
| **Additive** | ✅ | `additive` | Прозрачность по черному цвету. |
| **Masked** | ✅ | `masked` | Прозрачность по синему (индекс 255). |
| **Fullbright** | ✅ | `fullbright` | Игнорирование теней. |
| **Flat Shade** | ✅ | `flatshade` | Отключает сглаживание теней на гранях. |

---
*Документация подготовлена на основе глубокого реверс-инжиниринга кода PrimeXT (Февраль 2025).*
